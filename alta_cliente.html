<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alta de Nuevos Clientes - CV Tools</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="page-alta-cliente">
    
    <img id="logo-for-pdf" src="img/cvtools.png" alt="Logo" style="display: none;">

    <div class="container">
        <header>
            <img src="img/cvtools.png" alt="CV Tools Logo" class="main-logo">
            <h1>Ficha de Alta y Mandato SEPA</h1>
        </header>

        <main>
            <form id="client-form" novalidate>
                <!-- Sección 1: Datos Fiscales -->
                <div class="form-section">
                    <h2>Sección 1: Datos Fiscales (Obligatorio)</h2>
                    <div class="form-grid">
                        <div class="form-group grid-full-width"><label for="nombre_empresa">Nombre de la Empresa / Deudor</label><input type="text" id="nombre_empresa" name="nombre_empresa" required></div>
                        <div class="form-group"><label for="cif">CIF</label><input type="text" id="cif" name="cif" required></div>
                        <div class="form-group"><label for="telefono_fiscal">Teléfono</label><input type="tel" id="telefono_fiscal" name="telefono_fiscal" required></div>
                        <div class="form-group grid-full-width"><label for="direccion">Dirección Fiscal</label><input type="text" id="direccion" name="direccion" required></div>
                        <div class="form-group"><label for="codigo_postal">Código Postal</label><input type="text" id="codigo_postal" name="codigo_postal" required></div>
                        <div class="form-group"><label for="poblacion">Población</label><input type="text" id="poblacion" name="poblacion" required></div>
                        <div class="form-group"><label for="provincia">Provincia</label><input type="text" id="provincia" name="provincia" required></div>
                        <div class="form-group"><label for="pais">País</label><input type="text" id="pais" name="pais" required value="España"></div>
                        <div class="form-group"><label for="email_fiscal">E-Mail Fiscal</label><input type="email" id="email_fiscal" name="email_fiscal" required></div>
                    </div>
                </div>

                <!-- Sección 2: Dirección de Entrega -->
                <div class="form-section">
                    <h2>Sección 2: Dirección de Entrega (si es diferente a la fiscal)</h2>
                    <div class="form-grid">
                        <div class="form-group grid-full-width"><label for="direccion_entrega">Dirección de Entrega</label><input type="text" id="direccion_entrega" name="direccion_entrega"></div>
                        <div class="form-group"><label for="cp_entrega">Código Postal</label><input type="text" id="cp_entrega" name="cp_entrega"></div>
                        <div class="form-group"><label for="poblacion_entrega">Población</label><input type="text" id="poblacion_entrega" name="poblacion_entrega"></div>
                        <div class="form-group"><label for="provincia_entrega">Provincia</label><input type="text" id="provincia_entrega" name="provincia_entrega"></div>
                    </div>
                </div>

                <!-- Sección 3: Dpto. Contabilidad -->
                <div class="form-section">
                    <h2>Sección 3: Dpto. Contabilidad (Obligatorio)</h2>
                    <div class="form-grid">
                        <div class="form-group"><label for="nombre_contabilidad">Nombre</label><input type="text" id="nombre_contabilidad" name="nombre_contabilidad" required></div>
                        <div class="form-group"><label for="apellidos_contabilidad">Apellidos</label><input type="text" id="apellidos_contabilidad" name="apellidos_contabilidad" required></div>
                        <div class="form-group"><label for="email_contabilidad">E-Mail de Contacto</label><input type="email" id="email_contabilidad" name="email_contabilidad" required></div>
                        <div class="form-group"><label for="telefono_contabilidad">Teléfono de Contacto</label><input type="tel" id="telefono_contabilidad" name="telefono_contabilidad" required></div>
                    </div>
                </div>

                <!-- Sección 4: Dpto. Compras -->
                <div class="form-section">
                    <h2>Sección 4: Dpto. Compras</h2>
                    <div class="form-grid">
                        <div class="form-group"><label for="nombre_compras">Nombre</label><input type="text" id="nombre_compras" name="nombre_compras"></div>
                        <div class="form-group"><label for="apellidos_compras">Apellidos</label><input type="text" id="apellidos_compras" name="apellidos_compras"></div>
                        <div class="form-group"><label for="email_compras">E-Mail</label><input type="email" id="email_compras" name="email_compras"></div>
                        <div class="form-group"><label for="telefono_compras">Teléfono</label><input type="text" id="telefono_compras" name="telefono_compras"></div>
                    </div>
                </div>

                <!-- Sección 5: Información Bancaria -->
                <div class="form-section">
                    <h2>Sección 5: Información Bancaria (para Mandato SEPA)</h2>
                    <div class="form-grid">
                        <div class="form-group grid-full-width"><label for="iban">Número de cuenta - IBAN</label><input type="text" id="iban" name="iban" placeholder="ES00 0000 0000 00 0000000000"></div>
                        <div class="form-group"><label for="swift">Swift BIC</label><input type="text" id="swift" name="swift"></div>
                        <div class="form-group"><label for="tipo_pago_sepa">Tipo de pago</label><select id="tipo_pago_sepa" name="tipo_pago_sepa"><option value="recurrente" selected>Pago recurrente</option><option value="unico">Pago único</option></select></div>
                    </div>
                </div>
                
                <div id="form-feedback"></div>

                <button type="submit" class="submit-button">Generar Ficha de Alta y Mandato SEPA</button>
            </form>
            <a href="index.html" class="back-link">← Volver al menú principal</a>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
    
    <!-- RUTA CORREGIDA PARA APUNTAR A LA CARPETA 'logic' -->
    <script src="logic/alta_cliente.js"></script>
</body>
</html>